<!DOCTYPE html>
<html lang="en">
    <%- include('layouts/header'); -%>
    <script>
        // Check for query parameter and display alert
        const urlParams = new URLSearchParams(window.location.search);
        const alertType = urlParams.get('alert');

        if (alertType === 'success') {
            alert('Data Updated successfully!');
        } else if (alertType === 'error') {
            alert('No Data found please enter correct LicenseNo');
        }
  </script>
    
    <body>
        <!-- Navigation-->
        <%- include('layouts/navbar'); -%>
        <header class="masthead" style="background-image: url('assets/img/g.jpg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="page-heading">
                            <h1>G</h1>
                            <span class="subheading">Test</span>
                        </div>
                    </div>
                </div>
            </div>
            
        </header>

        <!-- Main Content-->
        <main class="mb-4">
            <div class="container mt-5 col-md-6">
                <!-- <form action="/fetch-update-data" method="post">
                  <div class="form-group">
                    <label for="licenseNumber">License Number:</label>
                    <input type="text" class="form-control" id="licenseNumber" name="licenseNumber" placeholder="Enter License Number">
                  </div>
                  <button type="submit" class="btn btn-primary mt-3">Submit</button>
                </form> -->
              </div>
              
              <div class="container">
              <!-- Display fetched data or a message -->
                <% if (data) { %>
                    <h2>User Data:</h2>
                    <form method="post" action="/update-user-data">
                        <!-- First Name -->
                        <div class="form-group">
                            <!-- <label for="firstName">First Name:</label> -->
                            <input type="text" class="form-control" id="uid" name="uid" value="<%= data.id %>" hidden>
                        </div>
                         <!-- First Name -->
                         <!-- <div class="form-group">
                            <label for="firstName">Username :</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" value="<%= data.username %>" disabled>
                        </div> -->
                         <!-- First Name -->
                         <!-- <div class="form-group">
                            <label for="firstName">User Type:</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" value="<%= data.user_type %>" disabled>
                        </div> -->
                        <!-- First Name -->
                        <div class="form-group">
                            <label for="firstName">First Name:</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" value="<%= data.firstname %>" disabled>
                        </div>
                        
                        <!-- Last Name -->
                        <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" value="<%= data.lastname %>" disabled>
                        </div>

                        <!-- License Number -->
                        <!-- <div class="form-group">
                            <label for="licenseNumber">License Number:</label>
                            <input name="licenseNumber" type="text"  class="form-control" id="licenseNumber" value="<%= data.licenseNo %>" disabled>
                        </div> -->

                        <!-- Age -->
                        <div class="form-group">
                            <label for="age">Age:</label>
                            <input type="number" class="form-control" id="age" name="age" value="<%= data.age %>" disabled>
                        </div>

                        <!-- Date of Birth -->
                        <!-- <div class="form-group">
                            <label for="dob">Date of Birth:</label>
                            <input type="date" class="form-control" id="dob" name="dob" value="<%= datef %>" disabled>
                        </div> -->

                        <!-- Car Details -->
                        <div class="form-group">
                            <label for="make">Car Details:</label>
                            <div class="row">
                                <div class="col">
                                    <input type="text" class="form-control" id="make" placeholder="Make" name="Make" value="<%= data.car_details.make %>" required>
                                </div>
                                <div class="col">
                                    <input type="text" class="form-control" id="model" placeholder="Model" name="Model" value="<%= data.car_details.model %>" required>
                                </div>
                                <div class="col">
                                    <input type="text" class="form-control" id="year" placeholder="Year" name="Year" value="<%= data.car_details.year %>" required>
                                </div>
                                <div class="col">
                                    <input type="text" class="form-control" id="plateNumber" placeholder="Plate Number" name="plateNumber" value="<%= data.car_details.platno %>" required disabled>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary mt-3">Update Data</button>
                    </form>
                <% } else if (data) { %>
                    <p><%= data %></p>
                <% } %>
            </div>
        </main>

        <%- include('layouts/footer'); -%>
        <%- include('layouts/scripts'); -%>
    </body>
</html>
